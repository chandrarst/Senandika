<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Senandika - Wireframe</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      color: #1f2937;
    }
    /* Soft pastel colors with high contrast */
    .soft-bg {
      background-color: #e0f2fe; /* light blue */
    }
    .soft-bg-alt {
      background-color: #fef3c7; /* light yellow */
    }
    .btn-emergency {
      background-color: #ef4444; /* red-500 */
      transition: background-color 0.3s ease;
    }
    .btn-emergency:hover {
      background-color: #b91c1c; /* red-700 */
    }
  </style>
</head>
<body class="flex flex-col h-screen">

  <!-- Main content area -->
  <main class="flex-grow overflow-auto p-4">

    <!-- Dashboard -->
    <section id="dashboard" class="space-y-6">
      <h1 class="text-2xl font-semibold mb-2">Dashboard Utama</h1>
      <div class="grid grid-cols-1 gap-4">

        <!-- Status Kesehatan -->
        <div class="soft-bg p-4 rounded-lg shadow flex items-center space-x-4">
          <i class="fas fa-heartbeat text-red-500 text-3xl"></i>
          <div>
            <h2 class="font-semibold text-lg">Status Kesehatan</h2>
            <p class="text-gray-700">Normal, tekanan darah stabil</p>
          </div>
        </div>

        <!-- Mood Hari Ini -->
        <div class="soft-bg p-4 rounded-lg shadow flex items-center space-x-4">
          <i class="fas fa-smile-beam text-yellow-400 text-3xl"></i>
          <div>
            <h2 class="font-semibold text-lg">Mood Hari Ini</h2>
            <p class="text-gray-700">Bahagia dan semangat</p>
          </div>
        </div>

        <!-- Lokasi Terakhir -->
        <div class="soft-bg p-4 rounded-lg shadow flex items-center space-x-4">
          <i class="fas fa-map-marker-alt text-blue-500 text-3xl"></i>
          <div>
            <h2 class="font-semibold text-lg">Lokasi Terakhir</h2>
            <p class="text-gray-700">Rumah, Jalan Melati No. 12</p>
          </div>
        </div>

        <!-- Notifikasi Penting -->
        <div class="soft-bg p-4 rounded-lg shadow flex items-center space-x-4">
          <i class="fas fa-bell text-indigo-500 text-3xl"></i>
          <div>
            <h2 class="font-semibold text-lg">Notifikasi Penting</h2>
            <p class="text-gray-700">Pengingat vaksinasi bulan depan</p>
          </div>
        </div>

      </div>
    </section>

    <!-- Pengingat Obat -->
    <section id="medication" class="hidden space-y-4">
      <h1 class="text-2xl font-semibold mb-2">Pengingat Obat</h1>
      <ul class="divide-y divide-gray-300 border rounded-lg overflow-hidden">
        <li class="flex items-center justify-between p-4 bg-white">
          <div>
            <p class="font-semibold">Paracetamol 500mg</p>
            <p class="text-gray-600 text-sm">08:00 AM</p>
          </div>
          <div>
            <input type="checkbox" id="med1" class="w-5 h-5" />
            <label for="med1" class="ml-2 text-gray-700">Sudah diminum</label>
          </div>
        </li>
        <li class="flex items-center justify-between p-4 bg-white">
          <div>
            <p class="font-semibold">Vitamin C</p>
            <p class="text-gray-600 text-sm">12:00 PM</p>
          </div>
          <div>
            <input type="checkbox" id="med2" class="w-5 h-5" />
            <label for="med2" class="ml-2 text-gray-700">Sudah diminum</label>
          </div>
        </li>
        <li class="flex items-center justify-between p-4 bg-white">
          <div>
            <p class="font-semibold">Obat Kolesterol</p>
            <p class="text-gray-600 text-sm">06:00 PM</p>
          </div>
          <div>
            <input type="checkbox" id="med3" class="w-5 h-5" />
            <label for="med3" class="ml-2 text-gray-700">Sudah diminum</label>
          </div>
        </li>
      </ul>
    </section>

    <!-- Chatbot Teman Ngobrol -->
    <section id="chatbot" class="hidden p-4 bg-white rounded-lg shadow">
        <!-- Chatbot Header -->
        <div class="flex items-center justify-between mb-4">
          <h1 class="text-2xl font-semibold text-gray-800">Chatbot Teman Ngobrol</h1>
          <div id="status-indicator" class="flex items-center">
              <span class="h-3 w-3 rounded-full bg-gray-400 mr-2"></span>
              <span class="text-sm text-gray-500">Offline</span>
          </div>
      </div>

      <!-- Chat Messages Area -->
      <div id="chatbox" class="border border-gray-200 rounded-lg p-4 h-96 overflow-y-auto mb-4 bg-gray-50 shadow-inner">
          <div class="text-center text-gray-500 italic py-8">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-2 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
              </svg>
              <p>Mulai ngobrol dengan menekan tombol mikrofon</p>
          </div>
      </div>

      <!-- Voice Button -->
      <div class="flex justify-center">
          <button id="voiceBtn" class="relative w-20 h-20 bg-red-500 hover:bg-red-600 text-white text-3xl rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50 flex items-center justify-center">
              <span id="mic-icon">ðŸŽ¤</span>
              <div id="recording-indicator" class="absolute -top-2 -right-2 h-5 w-5 bg-red-600 rounded-full hidden animate-pulse"></div>
          </button>
      </div>

      <!-- Error Message Area -->
      <div id="error-message" class="mt-2 text-red-500 text-sm hidden"></div>

      <!-- Loading Indicator -->
      <div id="loading-indicator" class="text-center py-2 hidden">
          <div class="inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"></div>
          <span class="ml-2 text-gray-600">Bot sedang mengetik...</span>
      </div>
    </div>
    </section>

    <!-- Tombol Darurat -->
    <section id="emergency" class="hidden flex flex-col items-center justify-center space-y-6 p-4">
      <button class="btn-emergency text-white font-bold text-xl rounded-full w-40 h-40 flex items-center justify-center shadow-lg focus:outline-none focus:ring-4 focus:ring-red-600">
        <i class="fas fa-phone-volume fa-2x"></i>
        <span class="block mt-2">Tombol Darurat</span>
      </button>
      <p class="text-center text-gray-700 max-w-xs">Tekan tombol ini untuk mengirim notifikasi darurat dan menghubungi rumah sakit atau call center.</p>
    </section>

    <!-- Pelacakan Lokasi -->
    <section id="location" class="hidden p-4">
      <h1 class="text-2xl font-semibold mb-4">Pelacakan Lokasi</h1>
      <div class="w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500">
        Peta lokasi real-time akan ditampilkan di sini
      </div>
    </section>

    <!-- Konsultasi Dokter -->
    <section id="consultation" class="hidden p-4">
      <h1 class="text-2xl font-semibold mb-4">Konsultasi Dokter</h1>
      <div class="bg-white rounded-lg shadow p-4 space-y-4">
        <button class="w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition">Video Call Dokter</button>
        <button class="w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition">Chat dengan Dokter</button>
      </div>
    </section>

    <!-- Profil Lansia -->
    <section id="profile" class="hidden p-4">
      <h1 class="text-2xl font-semibold mb-4">Profil Lansia</h1>
      <div class="bg-white rounded-lg shadow p-4 space-y-3">
        <p><span class="font-semibold">Nama:</span> Bapak Joko</p>
        <p><span class="font-semibold">Usia:</span> 75 tahun</p>
        <p><span class="font-semibold">Riwayat Kesehatan:</span> Hipertensi, Diabetes</p>
        <p><span class="font-semibold">Jadwal Aktivitas:</span> Jalan pagi pukul 7, Senam lansia pukul 9</p>
      </div>
    </section>

  </main>

  <!-- Bottom Navigation Bar -->
  <nav class="bg-white border-t border-gray-300 fixed bottom-0 left-0 right-0 flex justify-around items-center h-16 shadow-inner">
    <button aria-label="Dashboard" class="nav-btn flex flex-col items-center justify-center text-gray-600 hover:text-blue-600 focus:text-blue-600" data-target="dashboard">
      <i class="fas fa-tachometer-alt text-xl"></i>
      <span class="text-xs mt-1">Dashboard</span>
    </button>
    <button aria-label="Pengingat Obat" class="nav-btn flex flex-col items-center justify-center text-gray-600 hover:text-blue-600 focus:text-blue-600" data-target="medication">
      <i class="fas fa-pills text-xl"></i>
      <span class="text-xs mt-1">Obat</span>
    </button>
    <button aria-label="Chatbot" class="nav-btn flex flex-col items-center justify-center text-gray-600 hover:text-blue-600 focus:text-blue-600" data-target="chatbot">
      <i class="fas fa-robot text-xl"></i>
      <span class="text-xs mt-1">Chatbot</span>
    </button>
    <button aria-label="Tombol Darurat" class="nav-btn flex flex-col items-center justify-center text-red-600 hover:text-red-700 focus:text-red-700" data-target="emergency">
      <i class="fas fa-phone-volume text-xl"></i>
      <span class="text-xs mt-1 font-semibold">Darurat</span>
    </button>
    <button aria-label="Pelacakan Lokasi" class="nav-btn flex flex-col items-center justify-center text-gray-600 hover:text-blue-600 focus:text-blue-600" data-target="location">
      <i class="fas fa-map-marker-alt text-xl"></i>
      <span class="text-xs mt-1">Lokasi</span>
    </button>
    <button aria-label="Konsultasi Dokter" class="nav-btn flex flex-col items-center justify-center text-gray-600 hover:text-blue-600 focus:text-blue-600" data-target="consultation">
      <i class="fas fa-user-md text-xl"></i>
      <span class="text-xs mt-1">Dokter</span>
    </button>
    <button aria-label="Profil Lansia" class="nav-btn flex flex-col items-center justify-center text-gray-600 hover:text-blue-600 focus:text-blue-600" data-target="profile">
      <i class="fas fa-id-card text-xl"></i>
      <span class="text-xs mt-1">Profil</span>
    </button>
  </nav>

  <script>
    // Navigation button click handler
    const navButtons = document.querySelectorAll('.nav-btn');
    const sections = document.querySelectorAll('main > section');

    function showSection(targetId) {
      sections.forEach(section => {
        if (section.id === targetId) {
          section.classList.remove('hidden');
        } else {
          section.classList.add('hidden');
        }
      });
    }

    navButtons.forEach(button => {
      button.addEventListener('click', () => {
        showSection(button.getAttribute('data-target'));
      });
    });

    // Show dashboard by default
    showSection('dashboard');
  </script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
      const voiceBtn = document.getElementById('voiceBtn');
      const chatbox = document.getElementById('chatbox');
      const statusIndicator = document.getElementById('status-indicator');
      const errorMessage = document.getElementById('error-message');
      const loadingIndicator = document.getElementById('loading-indicator');
      const recordingIndicator = document.getElementById('recording-indicator');
      const micIcon = document.getElementById('mic-icon');

      // Check browser compatibility
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
          showError('Browser Anda tidak mendukung fitur Speech Recognition. Gunakan Chrome atau Edge versi terbaru.');
          voiceBtn.disabled = true;
          voiceBtn.classList.add('opacity-50', 'cursor-not-allowed');
          return;
      }

      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();
      recognition.lang = 'id-ID';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      const synth = window.speechSynthesis;
      let isSpeaking = false;

      function updateStatus(connected) {
          const statusDot = statusIndicator.querySelector('span:first-child');
          const statusText = statusIndicator.querySelector('span:last-child');
          
          if (connected) {
              statusDot.classList.remove('bg-gray-400');
              statusDot.classList.add('bg-green-500');
              statusText.textContent = 'Online';
              statusText.classList.remove('text-gray-500');
              statusText.classList.add('text-green-600');
          } else {
              statusDot.classList.remove('bg-green-500');
              statusDot.classList.add('bg-gray-400');
              statusText.textContent = 'Offline';
              statusText.classList.remove('text-green-600');
              statusText.classList.add('text-gray-500');
          }
      }

      function showError(message) {
          errorMessage.textContent = message;
          errorMessage.classList.remove('hidden');
          setTimeout(() => errorMessage.classList.add('hidden'), 5000);
      }

      function addMessage(sender, text, isUser = false) {
          const messageClass = isUser ? 'text-blue-600' : 'text-green-600';
          const messageContainer = document.createElement('div');
          messageContainer.className = `mb-3 ${isUser ? 'text-right' : 'text-left'}`;
          messageContainer.innerHTML = `
              <p class="font-semibold ${messageClass}"><strong>${sender}:</strong> ${text}</p>
              <p class="text-xs text-gray-400 mt-1">${new Date().toLocaleTimeString()}</p>
          `;
          chatbox.appendChild(messageContainer);
          chatbox.scrollTop = chatbox.scrollHeight;

          const placeholder = chatbox.querySelector('.text-center');
          if (placeholder) placeholder.remove();
      }

      voiceBtn.addEventListener('click', () => {
          if (isSpeaking) {
              synth.cancel();
              isSpeaking = false;
              return;
          }

          try {
              recognition.start();
              micIcon.textContent = 'ðŸŽ™ï¸';
              recordingIndicator.classList.remove('hidden');
              voiceBtn.classList.add('ring-4', 'ring-red-200');
          } catch (error) {
              showError('Gagal mengakses mikrofon: ' + error.message);
          }
      });

      recognition.onstart = () => updateStatus(true);
      recognition.onend = () => {
          updateStatus(false);
          micIcon.textContent = 'ðŸŽ¤';
          recordingIndicator.classList.add('hidden');
          voiceBtn.classList.remove('ring-4', 'ring-red-200');
      };

      recognition.onerror = event => {
          showError('Error: ' + event.error);
          updateStatus(false);
          micIcon.textContent = 'ðŸŽ¤';
          recordingIndicator.classList.add('hidden');
          voiceBtn.classList.remove('ring-4', 'ring-red-200');
      };

      recognition.onresult = async event => {
          const userText = event.results[0][0].transcript;
          addMessage('Kamu', userText, true);
          loadingIndicator.classList.remove('hidden');

          try {
              const botResponse = await getAIResponse(userText);
              addMessage('Bot', botResponse);

              // TTS Natural Enhancement
              const utterance = new SpeechSynthesisUtterance(botResponse);
              utterance.lang = 'id-ID';
              utterance.rate = 0.95; // Lebih lambat agar terdengar manusiawi
              utterance.pitch = 1.1; // Lebih hangat
              utterance.volume = 1.0;

              utterance.onstart = () => {
                  isSpeaking = true;
                  micIcon.textContent = 'ðŸ”Š';
              };

              utterance.onend = () => {
                  isSpeaking = false;
                  micIcon.textContent = 'ðŸŽ¤';
              };

              synth.speak(utterance);
          } catch (error) {
              showError('Gagal mendapatkan respon: ' + error.message);
              addMessage('Bot', 'Maaf, terjadi kesalahan saat memproses permintaan Anda.');
          } finally {
              loadingIndicator.classList.add('hidden');
          }
      };

      function getAIResponse(inputText) {
          const text = inputText.toLowerCase();
          if (text.includes("halo") || text.includes("hai")) {
              return "Hai juga... Ada yang bisa aku bantu?";
          } else if (text.includes("siapa kamu")) {
              return "Aku adalah chatbot... teman ngobrolmu!";
          } else if (text.includes("kabar") || text.includes("apa kabar")) {
              return "Aku baik... Makasih udah tanya! Kamu gimana?";
          } else if (text.includes("terima kasih")) {
              return "Sama-sama ya!";
          } else if (text.includes("makan")) {
              return "Aku nggak makan sih... Tapi kamu? Udah makan belum?";
          } else if (text.includes("cuaca") || text.includes("hujan") || text.includes("panas")) {
              return "Cuaca hari ini bisa beda-beda... Coba cek aplikasi cuaca ya.";
          } else if (text.includes("film") || text.includes("nonton")) {
              return "Aku suka film! Kamu suka genre apa? Drama... komedi... atau aksi?";
          } else if (text.includes("musik") || text.includes("lagu")) {
              return "Musik itu indah... Kamu lagi suka lagu apa akhir-akhir ini?";
          } else if (text.includes("hari apa") || text.includes("tanggal berapa")) {
              return `Hari ini adalah ${new Date().toLocaleDateString('id-ID', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' })}.`;
          } else if (text.includes("suka") || text.includes("senang")) {
              return "Aku suka ngobrol sama kamu... Serius!";
          } else if (text.includes("bantuan") || text.includes("help")) {
              return "Boleh banget! Tanya aja, aku siap bantu.";
          } else if (text.includes("cinta") || text.includes("sayang")) {
              return "Cinta itu... hmm... indah. Semoga kamu bahagia ya!";
          } else if (text.includes("keluar") || text.includes("selesai")) {
              return "Terima kasih udah ngobrol... Sampai jumpa lagi!";
          } else {
              return "Maaf ya... Aku belum ngerti itu. Coba tanyakan hal lain.";
          }
      }

      updateStatus(false);
  });
</script>


</body>
</html>
